<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> <%	String path = request.getContextPath();	String basePath = request.getScheme() + "://"			+ request.getServerName() + ":" + request.getServerPort()			+ path + "/"; %><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%><%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt"%><!DOCTYPE html><html>  <head>    <title>${loginBean.cName} - 学生信息登记</title>    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport" />    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    <base href="<%=basePath%>" />  </head>  <body class="contrast-red">    <%@ include file="/common/res.jsp" %>    <!-- 引入header头部 -->    <%@ include file="/common/header.jsp" %>     <div id="wrapper">      <!-- 引入左侧导航栏 -->      <%@ include file="/common/nav.jsp" %>      <section id="content">        <div class="container-fluid">          <div class="row-fluid" id="content-wrapper">            <div class="span12">              <div class="page-header">                <h1 class="pull-left">                  <i class="icon-edit"></i>                  <span>学生信息登记</span>                </h1>              </div>              <div class="row-fluid" id="addStudentForm">                <div class="span12 box">                  <div class="box-header blue-background">                    <div class="title">                      <div class="icon-user"></div>                      <b>添加学生</b><span style="color:red;">&nbsp;${error_msg}</span>                    </div>                    <div class="actions">                      <a href="#" class="btn box-collapse btn-mini btn-link"><i></i></a>                    </div>                  </div>                  <div class="box-content">                    <form accept-charset="UTF-8" id="addStudent" action="${pageContext.request.contextPath}/addStudent.html?type=add" class="form form-horizontal" method="post" style="margin-bottom: 0;" enctype="multipart/form-data"/>                    <div style="margin:0;padding:0;display:inline">                      <input name="type" type="hidden" value="add" />                    </div>
                    <div class="control-group">
                        <label class="control-label" for="inputPassword4"><span class="red">*</span>学生类型</label>
                        <div class="controls">
                          <select class='select2 input-block-level' style="width: 216px;" id="studentType" name="studentType">                          <c:forEach items="${studentTypes}" var="studentType">                          	<option value="${studentType.studentTypeId}">${studentType.studentTypecName}</option>                          </c:forEach>
                          </select>
                        </div>
                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red">*</span>状态</label>                        <div class="controls">                          <select id="state" class='select2 input-block-level' name="rollStatusTypeId" style="width: 216px;">                            <c:forEach items="${rollStatusTypes}" var="rollStatusType">                            	<option value="${rollStatusType.rollStatusTypeId}">${rollStatusType.cName}</option>                            </c:forEach>                          </select>                        </div>                      </div>
                      <div class="control-group">                        <label class="control-label" for="inputText1"><span class="red">*</span>姓名</label>                        <div class="controls">                          <input id="name" name="fullName" placeholder="姓名" type="text" />                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4">学号</label>                        <div class="controls">                          <input id="id" name="studentNumber" placeholder="学号" type="text"/>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4">校园卡号</label>                        <div class="controls">                          <input id="schoolId" placeholder="校园卡号" name="cardNumber" type="text"/>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red">*</span>E-MAIL</label>                        <div class="controls">                          <input id="email" name="email" placeholder="E-MAIL" type="text" />                        </div>                      </div>                      <div class="control-group">                        <label class="control-label"><span class="red">*</span>性别</label>                        <div class="controls">                          <label class="radio inline">                            <input type="radio" name="gender" value="1" checked=""/>                              男                          </label>                          <label class="radio inline">                            <input type="radio" name="gender" value="2" />                              女                          </label>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red">*</span>国籍</label>                        <div class="controls">                          <select name="nationalityId" class='select2 input-block-level' style="width: 216px;" id="country">                           <c:forEach items="${nationalities}" var="nationality">                           	<option value="${nationality.nationalityId}">${nationality.cName}</option>                           </c:forEach>                          </select>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red bmerouter">*</span>国内手机号</label>                        <div class="controls">                          <input id="adjectivePhone" name="adjectivePhone" placeholder="国内手机号" type="text" value="" />                        </div>                      </div>                      <div class="control-group" id="overseasPhoneForm">                        <label class="control-label" for="inputPassword4"><span class="red">*</span>海外手机号</label>                        <div class="controls">                          <input id="overseasPhone" name="overseasPhone" placeholder="海外手机号" type="text" />                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red">*</span>出生日期</label>                        <div class="controls">                          <div class="datepicker input-append" id="datepicker">                            <input class="dp" id="birthday" name="birthday" class="input-medium" data-format="yyyy-MM-dd" placeholder="出生日期" type="text" />                            <span class="add-on">                              <i data-date-icon="icon-calendar" data-time-icon="icon-time"></i>                            </span>                          </div>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red">*</span>出生地</label>                        <div class="controls">                          <input id="birthPlace'" name="birthplace" placeholder="出生地" type="text" />                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red">*</span>家庭住址</label>                        <div class="controls">                          <input id="address" name="homeAddress" placeholder="家庭住址" type="text" />                        </div>                      </div>                      <hr class="hr-normal" />                      <div class="control-group">                        <label class="control-label" for="inputSelect">学院</label>                        <div class="controls">                          <select id="coggle" name="academyId" class='select2 input-block-level' style="width: 216px;">                            <option></option>                            <c:forEach items="${academyMap}" var="academy">                            	<option value="${academy.key}">${academy.value.cName}</option>                            </c:forEach>                          </select>                        </div>                      </div>                      <div class="control-group">                        <label id="major" class="control-label" for="inputSelect">专业</label>                        <div class="controls">                          <select name="majorId" class='select2 input-block-level' style="width: 216px;">                          	 <option></option>                             <c:forEach items="${majorMap}" var="major">                            	<option value="${major.key}">${major.value.majorChineseName}</option>                            </c:forEach>                          </select>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputSelect">班级</label>                        <div class="controls">                          <select name="classId" id="class" class='select2 input-block-level' style="width: 216px;">                             <option></option>                             <c:forEach items="${classMap}" var="amcOnUser">                            	<option value="${amcOnUser.key}">${amcOnUser.value.cclass.cName}</option>                            </c:forEach>                          </select>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4">寝室号</label>                        <div class="controls">                          <input id="bedroom" name="dormitoryNumber" placeholder="寝室号" type="text" />                        </div>                      </div>                      <div class="control-group" id="passportForm">                        <label class="control-label" for="inputPassword4"><span class="red bmer">*</span>护照号</label>                        <div class="controls">                          <input id="passport" name="passportNumber" placeholder="护照号" type="text" />                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red">*</span>入学时间</label>                        <div class="controls">                          <div class="datepicker input-append" id="">                            <input class="dp" id="inSchoolTime" name="startDate" class="input-medium" data-format="yyyy-MM-dd" placeholder="入校日期" type="text" />                            <span class="add-on">                              <i data-date-icon="icon-calendar" data-time-icon="icon-time"></i>                            </span>                          </div>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red bmer">*</span>毕业时间</label>                        <div class="controls">                          <div class="datepicker input-append" id="">                            <input class="dp" id="graduationTime" name="endDate" class="input-medium" data-format="yyyy-MM-dd" placeholder="毕业时间" type="text" />                            <span class="add-on">                              <i data-date-icon="icon-calendar" data-time-icon="icon-time"></i>                            </span>                          </div>                        </div>                      </div>                      <div class="control-group" id="agentForm">                        <label class="control-label" for="inputPassword4"><span class="red bmer">*</span>中介单位名</label>                        <div class="controls">                          <input id="agent" name="intermediaryName" placeholder="中介" type="text" />                        </div>                      </div>                      <div class="control-group" id="agentPhoneForm">                        <label class="control-label" for="inputPassword4"><span class="red bmer">*</span>中介联系方式</label>                        <div class="controls">                          <input id="agentPhone" name="intermediaryPhone" placeholder="中介联系方式" type="text" />                        </div>                      </div>                    <div class="control-group" id="offerForm">
                        <label class="control-label" for="inputPassword4"><span class="red typer bmer">*</span>担保人</label>
                        <div class="controls">
                          <select class='select2 input-block-level' name="guaranteeId" style="width: 216px;" id="offer">
                            <c:forEach items="${guarantees}" var="guarantee">                              <option value="${guarantee.guaranteeId}">${guarantee.guaranteecName}</option>                            </c:forEach>
                          </select>
                        </div>
                      </div>
                      <div class="control-group">                        <label class="control-label" for="inputPassword4"><span class="red">*</span>注册截止时间</label>                        <div class="controls">                          <div class="datepicker input-append" id="">                            <input class="dp" id="regTimeLine" name="registerDeadLine" class="input-medium" data-format="yyyy-MM-dd" placeholder="注册截止时间" type="text" />                            <span class="add-on">                              <i data-date-icon="icon-calendar" data-time-icon="icon-time"></i>                            </span>                          </div>                        </div>                      </div>                      <div class="control-group" id="visaTimeLineForm">                        <label class="control-label" for="inputPassword4"><span class="red bmer">*</span>签证到期时间</label>                        <div class="controls">                          <div class="datepicker input-append" id="">                            <input class="dp" id="visaTimeLine" name="visaDueDate" class="input-medium" data-format="yyyy-MM-dd" placeholder="签证到期时间" type="text" />                            <span class="add-on">                              <i data-date-icon="icon-calendar" data-time-icon="icon-time"></i>                            </span>                          </div>                        </div>                      </div>
                      <div class="control-group">                        <label class="control-label" for="inputSelect"><span class="red bmer">*</span>婚姻状况</label>                        <div class="controls">                          <select id="marriage" name="isMarried" class='select2 input-block-level' style="width: 216px;">                            <option value="2">未婚</option>                            <option value="1">已婚</option>                          </select>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputSelect"><span class="red bmer">*</span>学历</label>                        <div class="controls">                          <select id="academic" name="educationTypeId" class='select2 input-block-level' style="width: 216px;">                            <c:forEach items="${educationTypes}" var="educationType">                            	<option value="${educationType.educationTypeId}">${educationType.cName}</option>                            </c:forEach>                          </select>                        </div>                      </div>                      <div class="control-group">                        <label class="control-label" for="inputSelect"><span class="red">*</span>是否为国外学历</label>                        <div class="controls">                          <select id="academic" name="isOversea" class='select2 input-block-level' style="width: 216px;">                            <option value="1">是</option>                            <option value="2">否</option>                          </select>                        </div>                      </div>                      <div class="control-group" id="passportImgForm1">                        <label class="control-label" for="inputSelect"><span class="red bmer">*</span>护照页</label>
                        <div class="controls">                          <div>                            <input title="浏览..." name="passportPage1" type="file" id="passportImg1" class="passportImg" />                          </div>                        </div>                      </div>                      <div class="control-group" id="passportImgForm2">                        <label class="control-label" for="inputSelect">入境页</label>
                        <div class="controls">                          <div>                            <input title="浏览..." name="passportPage2" type="file" class="passportImg"/>                          </div>                        </div>                      </div>                      <div class="control-group" id="passportImgForm3">                        <label class="control-label" for="inputSelect">签证页</label>
                        <div class="controls">                          <div>                            <input title="浏览..." name="passportPage3" type="file" class="passportImg"/>                          </div>                        </div>                      </div>                      <div class="form-actions">                        <button class="btn btn-primary" type="button" id="add">                          <i class="icon-save"></i>                          <b>添加</b>                        </button>                      </div>                    </form>                  </div>                </div>              </div>            </div>          </div>        </div>      </section>    </div>    <!-- SCRIPTS -->    <script>    $(document).ready(function() {      $(".dp").each(function(){        $(this).attr("readonly", "true");      });      var studentType = 1;  // 国外      var stuStater = 0;      $("#state").click(function(){        if($(this).val() === "2"){          $(".bmer").each(function(){            $(this).css("display", "none");          });          if(studentType === 1) $(".bmerouter").css("display", "none");          stuStater = 1;    // 报名        }else{          $(".bmer").each(function(){            $(this).css("display", "inline");          });          $(".bmerouter").css("display", "inline");          stuStater = 0;        }      });      $("#studentType").click(function(){        if($(this).val() === "2"){          studentType = 0;    // 国内          $("#overseasPhoneForm").slideUp();          $("#passportForm").slideUp();          $("#agentForm").slideUp();          $("#agentPhoneForm").slideUp();          $("#visaTimeLineForm").slideUp();          $("#offerForm").slideUp();          $("#passportImgForm1").slideUp();          $("#passportImgForm2").slideUp();          $("#passportImgForm3").slideUp();          $(".bmerouter").css("display", "inline");        }else if($(this).val() === "1"){          studentType = 1;    // 国外          $("#overseasPhoneForm").slideDown();          $("#passportForm").slideDown();          $("#agentForm").slideDown();          $("#agentPhoneForm").slideDown();          $("#visaTimeLineForm").slideDown();          $("#offerForm").slideDown();          $("#passportImgForm1").slideDown();          $("#passportImgForm2").slideDown();          $("#passportImgForm3").slideDown();          if(stuStater === 1) $(".bmerouter").css("display", "none");        }      });      $("#add").click(function() {        var name           = $("#name").val();        var email          = $("#email").val();        var sex            = $("input[name='sex'][checked]").val();        var country        = $("#country").val();        var adjectivePhone = $("#adjectivePhone").val();        var overseasPhone  = $("#overseasPhone").val();        var birthday       = $("#birthday").val();        var passport       = $("#passport").val();        var inSchoolTime   = $("#inSchoolTime").val();        var graduationTime = $("#graduationTime").val();        var agent          = $("#agent").val();        var marriage       = $("#marriage").val();        var academic       = $("#academic").val();        var state          = $("#state").val();        var agentPhone     = $("#agentPhone").val();        var regTimeLine    = $("#regTimeLine").val();        var visaTimeLine   = $("#visaTimeLine").val();        var passportImg    = $("#passportImg1").val();        var birthPlace     = $("#birthPlace").val();        var address        = $("#address").val();        var tel            = "x";        var offer          = $("#offer").val();        var passportImg1   = $("#passportImg1").val();        var $moneySrc       = $(".moneySrc");        var passportImgStr = "";        $(".passportImg").each(function(){          if($(this).val() !== "") passportImgStr += $(this).val() + ";";        });        $("#passportImgStr").val(passportImgStr);        // 国外不报名        if(studentType === 1 && stuStater === 0){          if(name === "" || email === "" ||          sex === "" || country === "" ||          adjectivePhone === "" || overseasPhone === "" ||          birthday === "" || passport === "" ||          inSchoolTime === "" || graduationTime === "" ||          birthPlace === "" || address === "" || tel === "" ||          agent === "" || agentPhone === "" || marriage === "" ||          state === "" || offer === "" || passportImg1 === "" ||          regTimeLine === "" || visaTimeLine === ""){            layer.msg("请输入必填信息");            return 0;          }        }        // 国內不报名        if(studentType === 0 && stuStater === 0){          if(name === "" || email === "" ||          sex === "" || country === "" ||          adjectivePhone === "" ||          birthday === "" || birthPlace === "" ||          address === "" || tel === "" ||          inSchoolTime === "" || graduationTime === "" ||          state === "" || regTimeLine === ""){              layer.msg("请输入必填信息");            return 0;          }        }        // 国外报名        if(stuStater === 1 && studentType === 1){          if(name === "" || email === "" ||          sex === "" || country === "" ||          overseasPhone === "" ||          inSchoolTime === "" ||  regTimeLine === "" ||          birthday === "" || birthPlace === "" ||          address === "" || tel === "" || state === ""){            layer.msg("请输入必填信息");            return 0;          }        }        // 国内报名        if(stuStater === 1 && studentType === 0){          if(name === "" || email === "" ||          sex === "" || country === "" ||          adjectivePhone === "" || birthPlace === "" ||          address === "" || tel === "" ||          inSchoolTime === "" ||  regTimeLine === "" ||          birthday === ""){            layer.msg("请输入必填信息");            return 0;          }        }	        $("#addStudent").submit();      });    });    </script>
  </body></html>